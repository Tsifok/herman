<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="file.js"></script>
</head>
<body>
    <script>
        lat = -34.6148022 ;
        lon = -58.4056014 ;
        apiK = "0a3503cab55ea599bdb96158ea8798d8" ; 


        $.ajax({
            url:"https://api.openweathermap.org/data/2.5/forecast?lat="+lat+"&lon="+lon+"&appid="+apiK,
            dataType: "json",
            success:function(clima)
            {
                clima = clima['list'];

                temp_max_base = clima[0]['main']['temp_min'];
                temp_min_base = clima[0]['main']['temp_max'];
                day = clima[0]['dt_txt'];
                lluvia_semanal = 0;

                clima.forEach(function(el1){
                
                min = el1['main']['temp_min'];
                max = el1['main']['temp_max'];
                weather = el1['weather'][0]['main'];

                    //ver el estado del tiempo ej: nublado, lluvioso etc
                    switch(weather){
                        case "Clouds":
                            cloud_day = el1['dt_txt']
                            console.log("En esta fecha estuvo nublado :"+cloud_day);
                            break;
                            //document.getElementById("hola").innerHTML = parseInt(cloud_day.slice(11,13));
                            break;
                        case "Rain":
                            cloud_day = el1['dt_txt']
                            console.log("En esta fecha estuvo lloviendo :"+cloud_day);
                            lluvia_semanal ++;
                            break;
                        case "Clear":
                            cloud_day = el1['dt_txt']
                            console.log("En esta fecha estuvo despejado :"+cloud_day);
                            break;
                    }

                    //tomar temperaturas max & min
                    if(max > temp_max_base){
                        temp_max_base = max;
                        hotter_day = el1['dt_txt'];
                    }
                
                    if(temp_min_base > min){    
                        temp_min_base = min;
                    }

                })

                //pasar las temperaturas de K a C
                aprox_max = temp_max_base - 273.15;
                aprox_min = temp_min_base - 273.15;
                
                //Print en consola
                if(lluvia_semanal > 1)
                {
                    //console.log("si ha llovido esta semana")
                }
                console.log("La temperatura maxima fue "+aprox_max.toFixed(2)+"C el dia "+hotter_day.slice(8,10)+" del "+hotter_day.slice(5,7)+" del a√±o "+hotter_day.slice(0,4)+" y la temperatura minima fue "+aprox_min.toFixed(2)+"C");
            }
                
        })
    </script>
    <p id="hola"></p>
</body>
</html>